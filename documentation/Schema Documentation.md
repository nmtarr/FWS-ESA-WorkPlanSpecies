# Schema Documentation

In the production of this dataset and overall data assembly process, I experimented with a JSON-focused implementation of well practiced methods in other frameworks to document entity/attribute information. I was looking for a method that would meet the essence of documentation requirements for human users to look at these data, understand what they are seeing, and learn how to use them effectively but also a technical form of the documentation on data contents that could be used to validate or even transform to comply with what's in the documentation. For this, I leveraged the [JSON Schema](https://json-schema.org) specification, generating schema documents in place of either entity/attribute information in FGDC metadata or an ISO Feature Catalog. The schemas contain the same type of information available in the metadata standards, including a delineation of available values, numeric ranges, and other details, but they are encoded in a way that lends itself to applying technical tests against the data themselves to validate congruence. They can also be used with a number of technical tools as the documented models for marshalling responses from Application Programming Interface infrastructure.

The JSON Schema approach also worked well in the type of approach I used to build this particular dataset. Many of the sources I explore here for information associated with biological species come from third party APIs where I did not necessarily know what the data would look like before I had them all assembled to work through. I could then use either code-based methods or online tools like [jsonschema.net](http://jsonschema.net) to quickly introspect a given dataset and generate the stub of a JSON schema document that I could refine. I could then use an iterative process to work back and forth between examining the data, documenting the structures and properties, refining how I was pulling the data together, running a data assembly process, and then validating that the data structure generated aligned with the schema. Forcing the schema onto the data in this process helped to identify areas where refinement was needed for things like declaring data type and enumerating the viable values for a given property.

## Property Registry

This approach also helped to further explore the concept of a master property registry across all the different types of data we are bringing together for projects similar to the one that generated this suite of datasets. Ultimately, we are building a data integration and synthesis framework that is able to rapidly digest and understand many different types of heterogeneous source data and generate new products with some degree of machine learning. Some type of registry that captures the learning process and both the syntactic and semantic relationships between dataset and property schemas is going to be necessary. Using the referral construct of JSON Schema (and JSON-LD) and working through the commonalities across this dataset, I developed a number of common properties that are shared across datasets in this collection. These are common properties in terms of both their syntax and their semantics. The individual JSON Schema documents contain a "definitions" object (part of the JSON Schema specification) with the common properties that are then referred back to at the specific parts of a given schema where they are instantiated. Eventually, we will set these up as part of a live infrastructure so that the referrals reference an API as their source.

Toward this end, I established a notional "$id" construct at http://data.usgs.gov/property_registry/ as a placeholder. The domain is real, but the property registry has yet to be developed at that locale. Eventually, a referral to what our system knows as something like the "doi" concept will be resolvable at that registry to obtain the necessary syntax and semantics for use in documentation, data validation, data transformations, cross-linking with other systems, and querying for use.

### Common Properties

In the course of working through these particular schemas, I worked up a set of common properties that I think will stand the test of time in some fashion. These are very high level and simple concepts at this point, and I did not dig all that deeply into these particular concepts yet to see what may already exist from other groups. As we move this forward to some type of actual established system, we'll do some further refinement to make these real and meaningful. In the near term, for this data package, common properties are contained in the common_properties.json file where they are referenced inline from associated properties in the other schemas.
